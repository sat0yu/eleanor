<div style="width: 90%; margin: 0 auto">
  <p id="notice"><%= notice %></p>
  <p id="alert"><%= alert %></p>

  <h1>Eleanor</h1>

  <%= form_with(model: @script, local: true) do |form| %>
    <% if @script.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@script.errors.count, "error") %> prohibited this script from being saved:</h2>

        <ul>
        <% @script.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="actions">
      <p><%= form.text_field :title, placeholder: 'title (≤ 1KB)', style: "width: 100%" %></p>
      <p><%= form.text_field :description, placeholder: 'description (≤ 28KB)', style: "width: 100%" %></p>
      <div><%= form.text_area :body , placeholder: 'body (≤ 4MB)', style: "width: 100%" %></div>
      <p><%= form.submit %></p>
    </div>
  <% end %>

  <table style="margin: 0 auto; border-spacing: 1em; border-collapse: separate">
    <tbody>
      <tr>
        <th>title</th>
        <th>description</th>
        <th>body</th>
        <th>length</th>
        <th>link</th>
        <th>size</th>
        <th>create</th>
      </tr>
      <% @scripts.each do |script| %>
        <tr>
          <td><%= script.title.truncate(16) %></td>
          <td><%= script.description&.truncate(16) %></td>
          <td><%= script.body&.truncate(16) %></td>
          <td><%= script.length %></td>
          <td>
            <% speech_url = script.speech&.url %>
            <% if speech_url.present? %>
              <%= link_to "download", speech_url %>
            <% else %>
              -
            <% end %>
          </td>
          <td><%= number_to_human_size(script.speech&.size || 0) %></td>
          <td><%= script.created_at.strftime("%Y-%m-%d %H:%M") %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
